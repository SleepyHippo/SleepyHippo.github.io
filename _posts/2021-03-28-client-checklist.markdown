---
layout: post
title:  "客户端开发CheckList"
date:   2021-03-28 09:06:23 +0800
categories: GameDev
---

把项目中经常会碰到的问题，还有需要注意的点，总结出一份CheckList，当作备忘。如果能给予其他人一些帮助，就更好了：）
  
  因为原本是在项目中总结分享给同事的，所以有一些和具体项目相关的条目做了修改或删除。

### 自测了吗？
- 验收/测试用例都通过了吗？
- 运行过程中是否有报错？
- 启动时打印的可能没有释放的wnd和没反注册的消息有检查过吗？
- Git推送前，检查过所有修改的地方吗？
- 自测需要关注的有三个部分：执行环境、正在执行任务的类型、执行的操作类型
- 总的来说完整的自测是要在不同的执行环境下，用不同的操作来执行同一个任务
- 执行环境一共有这四种：
    - 网速慢
    - 网速快
    - 资源总是回收
    - 资源永不回收
- 下面是操作和任务的类型：

|                                          | 常规任务 | 异步任务（Task，协程，线程） | 持续任务（动效，音效之类） |
| ---------------------------------------- | ---- | ---------------- | ------------- |
| 正常操作                                     |      |                  |               |
| 快速操作                                     |      |                  |               |
| 中断操作（如Esc）                                |      |                  |               |
| 断线重连 |      |                  |               |

### 未来好调试吗？

- 写注释了吗？（类的开头、关键流程、复杂算法、特殊处理、疑难杂症）
- 写调试级别的Log了吗？（有打印开关）
- 写调试用的客户端GM命令了吗？（碰到Bug的时候，可以执行命令打印系统的关键状态）
- 发生一些很不可能发生的错误的时候，有LogError能看出来吗？

### 有犯一些常见的错误吗？

- 写空判断了吗？（访问资源，异步回调）
- 参数的异常情况有处理吗？
- 异步任务处理中断的情况了吗？（version或空判断或discard task）
- 异步任务执行的频率是否有必要这么高？（需要每帧执行吗？）
- 构造函数里写逻辑了吗？（无法热更）
- 哪里缓存数据组件了吗？（不要存）
- 哪里缓存别地方创建的容器了吗？（不要clear别人的容器）
- wnd类里的成员变量，在hideWnd的时候重置了吗？
- 协议回包时组件初始化完了吗？
- 有弹窗的地方，和新手引导、跳转引导、或者其他弹窗会冲突吗？
- 服务器发回来的数据如果不太合理，有报错吗？
- Git有Revert（还原）别人的提交吗？
- Unity序列化的变量（Mono或ScriptableObject）改名有加[FormerlySerializedAs]属性吗？

### 一些开发要求遵循了吗？

- **设计完整体结构后，有主动找其他同事Review一遍么？**
- 命名规范吗？
- 有很多复制粘贴的代码的话，尝试整理了吗？
- 这个修正/优化有单据吗？
- 要实现的业务是否有用公共的组件/方法来做？是否有可能做成通用的组件/方法？
- 开发时碰到的某个Bug，是否其他地方有可能有存在同样的问题？在群里提出来了吗？
- 线上热更提交后，合并回自己的ext分支了吗？

### 处理兼容了吗？

- 处理兼容的过程中，是否有删除、修改过资源中有配置的东西？或者存到文件、数据库里的东西？
- 已经上线的协议，有修改、删除字段吗？
- 已经上线的协议，新增字段是放在最后吗？
- 修改的枚举名，有在表里配置吗？（Excel存的是string）
- 修改的枚举值，有在UI上配置吗？（UI存的是int）
- 已经上线的本地存档，有修改、删除字段吗？
- 已经上线的本地存档，新增字段是放在最后吗？
- 已经在服务端保存的自定义数据，新增字段是放在最后吗？
- 实现完新功能之后，旧的配表，窗口，数据之类的，在新的代码中还有引用吗？

### 性能检查了吗？

- 用低端机测试了吗？
- 用Profiler跑过自己做的系统了吗？
- 热更的UI，放在正确的ab包里了吗？

### 每个模块有一些附带的相关的东西有处理吗？

- 红点
- 热更配表
- 埋点
- 性能检查